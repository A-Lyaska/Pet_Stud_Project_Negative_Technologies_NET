{% extends 'index.html' %}

{% block title %} Добавить нового клиента {% endblock %}
{% block content %}
<main>
    <div class="container">
        <h1 class="mt-5">Добавить нового клиента</h1>
        <form id="addCustomerForm" action="{{ url_for('add_new_customer') }}" method="POST" onsubmit="return validateForm()">
            <div class="mb-3">
                <label for="first_name" class="form-label">Имя</label>
                <input type="text" class="form-control" id="first_name" name="first_name" required>
            </div>
            <div class="mb-3">
                <label for="last_name" class="form-label">Фамилия</label>
                <input type="text" class="form-control" id="last_name" name="last_name" required>
            </div>
            <div class="mb-3">
                <label for="email" class="form-label">Email</label>
                <input type="email" class="form-control" id="email" name="email" required>
            </div>
            <div class="mb-3">
                <label for="phone" class="form-label">Телефон</label>
                <input type="text" class="form-control" id="phone" name="phone" required>
            </div>
            <div class="mb-3">
                <label for="address_id" class="form-label">ID адреса</label>
                <input type="number" class="form-control" id="address_id" name="address_id" required>
            </div>
            <div class="mb-3">
                <label for="created_at" class="form-label">Дата создания</label>
                <input type="datetime-local" class="form-control" id="created_at" name="created_at" required>
            </div>
            <div class="mb-3">
                <label for="tariff_id" class="form-label">ID тарифа</label>
                <input type="number" class="form-control" id="tariff_id" name="tariff_id" required>
            </div>
            <button type="submit" class="btn btn-primary">Добавить</button>
        </form>
    </div>
</main>

<script>
function validateForm() {
    const firstName = document.getElementById('first_name').value;
    const lastName = document.getElementById('last_name').value;
    const email = document.getElementById('email').value;
    const phone = document.getElementById('phone').value;
    const addressId = document.getElementById('address_id').value;
    const createdAt = document.getElementById('created_at').value;
    const tariffId = document.getElementById('tariff_id').value;

    if (!firstName || !lastName || !email || !phone || !addressId || !createdAt || !tariffId) {
        alert('Пожалуйста, заполните все поля.');
        return false;
    }

    const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    if (!emailPattern.test(email)) {
        alert('Пожалуйста, введите корректный email.');
        return false;
    }

    return true;
}
</script>
{% endblock %}
